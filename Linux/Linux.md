[toc]

# 基本命令

```shell
$ cal            # 查看日历
$ passwd         # 更改密码
$ whoami         # 我是谁
$ ls [-l]        # 列出目录和文件
$ users          # 列出与系统中登录的用户
$ who            # 列出与系统中登录的用户信息
$ w              # 列出与系统中登录的用户详细信息
$ logout         # 注销
```

**关闭系统**

```shell
$ halt           # 立即关闭系统
$ init 0         # 使用预定义脚本关闭系统以在关闭之前同步和清理系统
$ init 6         # 重启系统通过完全关闭它然后重新启动它
$ poweroff       # 关闭电源关闭系统
$ reboot         # 重新启动系统
$ shutdown       # 关闭系统
```

# 文件和目录

- **普通文件** ：普通文件是系统上包含数据，文本或程序指令的文件
- **目录** ：目录存储特殊文件和普通文件
- **特殊文件**：某些特殊文件可以访问硬件，如硬盘驱动器，CD-ROM驱动器，调制解调器和以太网适配器.其他特殊文件类似于别名或快捷方式，使您可以使用不同的名称访问单个文件.

## 文件管理

**文件基本命令**

```shell
$ ls [-l] [-a] [dir]                                # 列出文件和目录，[-l]：显示详情，[-a]：显示隐藏文件，[dir]:目录
$ cp <srcfile> <desfile>                            # 复制文件
$ mv <srcfile> <desfile>                            # 移动文件/重命名文件
$ rm [-i] <filename> [filename2] [filename3] ...    # 删除文件，[-i]：弹出确认信息
```

**文件信息**

```shell
$ls -l
total 1962188 

drwxrwxr-x  2 amrood amrood      4096 Dec 25 09:59 uml
-rw-rw-r--  1 amrood amrood      5341 Dec 25 08:38 uml.jpg
drwxr-xr-x  2 root   root        4096 Dec  9  2007 urlspedia
-rw-r--r--  1 root   root      276480 Dec  9  2007 urlspedia.tar

# 第一栏：文件类型和文件权限
# 第二栏：文件或目录占用的内存块数
# 第三列：文件所有者
# 第四列：所有者的组
# 第五栏：文件大小(字节)
# 第六列：上次创建或修改文件的时间
# 第七列：文件或目录名

# 每个文件行开始使用d，-或 l这些字符表示列出的文件的类型
# -：常规文件，例如ASCII文本文件，二进制可执行文件或硬链接
# b：阻止特殊文件。阻止输入/输出设备文件，例如物理硬盘驱动器
# c：字符特殊文件。原始输入/输出设备文件，例如物理硬盘驱动器
# d：目录文件
# l：链接文件
# p：命名管道，进程间通信的机制
# s：用于进程间通信的套接字
```

**元字符**

```shell
# *和？：*匹配0个或多个字符，？匹配单个字符
# 例：显示所有文件，其名称以ch开头，以.doc结尾
$ls ch*.doc
```

**VI**

```shell
$ vi <filename>                                        # 创建文件/编辑文件
$ cat [-b] <filename>                                  # 查看文件内容，[-b]：显示行号
$ wc <filename> [filename2] [filename3] ...            # 获取文件总行数、总字数、总字节数、文件名

# i ：进入编辑模式
# Esc ：退出编辑模式
# Shift+ Z：退出文件
# l ：右移光标
# h ：左移光标
# k：上移光标
# j ：下移光标
```

## 目录管理

- **单点(.)** : 这代表当前目录.
- **双点(..)** : 这表示父目录.

您第一次登录时找到自己的目录称为您的主目录.

您将在您的主目录和子目录中完成大部分工作.将创建以组织您的文件.

您可以随时使用以下命令进入您的主目录 :

```
 $ cd~  
```



这里**〜**表示主目录.假设您必须进入任何其他用户的主目录，请使用以下命令 :

```
 $ cd~username  
```



要进入上一个目录，可以使用以下命令 :

```
 $ cd  -   
```



## 绝对/相对路径名

目录按层次结构排列根(/)在顶部.层次结构中任何文件的位置由其路径名描述.

路径名的元素由/分隔.路径名是绝对的，如果它是关于root描述的，那么绝对路径名始终以/开头.

以下是绝对文件名的一些示例.

```
/etc/passwd /users/sjones/chem/notes /dev/rdsk/Os3
```



路径名也可以与当前工作目录相关.相对路径名从不以/开头.相对于用户amrood的主目录，一些路径名可能看起来像这样 :

```
 chem/notes  personal/res
```



要随时确定您在文件系统层次结构中的位置，请输入命令 **pwd** 以打印当前工作目录 :

```
$pwd/user0/home/amrood $
```



## 列表目录

要列出目录中的文件，可以使用以下语法 :

```
 $ ls dirname
```



以下是列出**/usr/local** 目录中包含的所有文件的示例 :

```
$ls /usr/local X11       bin          gimp       jikes       sbinace       doc          include    lib         shareatalk     etc          info       man         ami
```



## 创建Direc tories

我们现在将了解如何创建目录.目录由以下命令创建 :

```
$ mkdir dirname
```



此处，directory是要创建的目录的绝对路径名或相对路径名.例如，命令 :

```
$ mkdir mydir
```



在当前目录中创建目录 **mydir** .这是另一个例子 :

```
$ mkdir/tmp/test-dir $
```



此命令在**/tmp** 目录中创建目录 **test-dir** . **mkdir** 命令如果成功创建了请求的目录，则不会产生输出.

如果在命令行中给出多个目录， **mkdir** 创建每个目录.例如， :

```
 $ mkdir docs pub
```



在当前目录下创建目录docs和pub.

## 创建父目录

现在我们将了解如何创建父目录.有时，当您要创建目录时，其父目录可能不存在.在这种情况下， **mkdir** 发出错误消息，如下所示 :

```
$mkdir /tmp/amrood/testmkdir: Failed to make directory "/tmp/amrood/test"; No such file or directory$
```



在这种情况下，你可以指定 **-p** 选项到 **mkdir** 命令.它会为您创建所有必需的目录.例如 :

```
$mkdir -p /tmp/amrood/test$
```



以上命令创建所有必需的父目录.

## 删除目录

可以使用

```
$ rmdir dirname $
```



**注意** : 要删除目录，请确保它是空的，这意味着此目录中不应该有任何文件或子目录.

您可以一次删除多个目录，如下所示;

```
$ rmdir dirname1 dirname2 dirname3
```



以上命令删除目录dirname1，dirname2和dirname3(如果它们为空).如果成功， **rmdir** 命令不会产生输出.

## 更改目录

您可以使用 **cd** 命令不仅仅是更改到主目录.您可以通过指定有效的绝对路径或相对路径来将其更改为任何目录.语法如下所示 :

```
$ cd dirname
```



此处， **dirname** 是您要更改为的目录的名称.例如，命令 :

```
$ cd/usr/local/bin $
```



目录**/usr/local/bin** 的更改.在此目录中，您可以使用以下相对路径 :  **cd** 到目录**/usr/home/amrood** ;

```
$ cd ../../home/amrood $
```



## 重命名目录

**mv(move)**命令也可用于重命名目录.语法如下 :

```
 $ mv olddir newdir  $
```



您可以将目录 **mydir** 重命名为 **yourdir** ，如下所示 :

```
 $ mv mydir yourdir  $
```



## 目录. (点)和..(点点)

**文件名.**(点)表示当前工作目录;并且**文件名..** (点点)表示当前工作目录上一级的目录，通常称为父目录.

如果我们输入命令显示当前工作目录/文件的列表，并使用 **-a选项**列出所有文件，使用 **-l选项**提供长列表，我们将收到以下结果.

```
$ls -ladrwxrwxr-x    4    teacher   class   2048  Jul 16 17.56 .drwxr-xr-x    60   root              1536  Jul 13 14:18 ..----------    1    teacher   class   4210  May 1 08:27 .profile-rwxr-xr-x    1    teacher   class   1948  May 12 13:42 memo$
```

在本章中，我们将详细讨论Unix中的文件权限和访问模式.文件所有权是Unix的重要组成部分，它提供了一种存储文件的安全方法. Unix中的每个文件都有以下属性 :

- **所有者权限** : 所有者的权限确定文件所有者可以对文件执行的操作.
- **组权限** : 该组的权限确定作为文件所属组的成员的用户可以对该文件执行的操作.
- **其他(世界)权限** : 其他人的权限表明所有其他用户可以对该文件执行的操作.

## 权限指标

使用 **ls -l** 命令时，它会显示与文件权限相关的各种信息，如下所示;

```
$ls -l /home/amrood-rwxr-xr--  1 amrood   users 1024  Nov 2 00:10  myfiledrwxr-xr--- 1 amrood   users 1024  Nov 2 00:10  mydir
```



这里，第一列代表不同的访问模式，即与文件或目录相关的权限.

权限被分成三组，组中的每个位置表示一个特定的权限，顺序为:read(r)，write(w)，execute(x) :

- 前三个字符(2-4)表示文件所有者的权限.例如， **-rwxr-xr  -**  表示所有者已读取(r)，写入(w)和执行(x)权限.
- 第二组三个字符(5-7)由文件所属组的权限组成.例如， **-rwxr-xr  -**  表示该组具有读取(r)和执行(x)权限，但没有写入权限.
- 最后一组三个字符(8-10)表示其他人的权限.例如， **-rwxr-xr  -**  表示只有**读取(r)**权限.

## 文件访问模式

文件的权限是Unix系统安全性的第一道防线. Unix权限的基本构建块是**读取**，**写入**和**执行**权限，这些权限已在下面描述&减去;

### 读取

授予读取功能，即查看文件内容.

### 写入

授予修改或删除文件内容的功能.

### 执行

具有执行权限的用户可以运行文件作为程序.

## 目录访问模式

目录访问模式的列出和组织方式与任何其他文件相同.有一些差异需要提及 :

### 读取

访问目录意味着用户可以读取内容.用户可以查看目录中的**文件名**.

### 写

访问意味着用户可以添加或删除目录中的文件.

### 执行

执行目录确实没有意义，所以将其视为遍历权限.

用户必须**执行**访问 **bin** 目录才能执行 **ls** 或 **cd** 命令.

## 更改权限

要更改文件或目录权限，请使用 **chmod** (更改模式)命令.有两种方法可以使用chmod  - 符号模式和绝对模式.

### 在符号模式下使用chmod

初学者最简单的方法修改文件或目录权限是使用符号模式.使用符号权限，您可以使用下表中的运算符添加，删除或指定所需的权限集.

| Sr.No. |         Chmod operator&描述          |
| :----: | :----------------------------------: |
|   1    | **+**将指定的权限添加到文件或目录中. |
|   2    | **-**  从文件或目录中删除指定的权限. |
|   3    |         **=**设置指定的权限.         |

以下是使用**的示例testfile的**的.在测试文件上运行 **ls -1** 表明文件的权限如下 :

```
$ls -l testfile-rwxrwxr--  1 amrood   users 1024  Nov 2 00:10  testfile
```



然后每个示例 **chmod** 命令来自在testfile上运行上一个表，然后是 **ls -l** ，这样你就可以看到权限更改 :

```
$chmod o+wx testfile$ls -l testfile-rwxrwxrwx  1 amrood   users 1024  Nov 2 00:10  testfile$chmod u-x testfile$ls -l testfile-rw-rwxrwx  1 amrood   users 1024  Nov 2 00:10  testfile$chmod g = rx testfile$ls -l testfile-rw-r-xrwx  1 amrood   users 1024  Nov 2 00:10  testfile
```



以下是如何将这些命令组合在一行上并减去;

```
$chmod o+wx,u-x,g = rx testfile$ls -l testfile-rw-r-xrwx  1 amrood   users 1024  Nov 2 00:10  testfile
```



## 使用带有绝对权限的chmod

使用chmod修改权限的第二种方法命令是使用数字来指定文件的每组权限.

为每个权限分配一个值，如下表所示，并且每组权限的总和提供了一个该集的编号.

| Number |               八进制权限表示                |   Ref   |
| :----: | :-----------------------------------------: | :-----: |
| **0**  |                  没有许可                   |   ---   |
| **1**  |                  执行权限                   |  -  x   |
| **2**  |                  写入权限                   | -  w  - |
| **3**  |     执行和写入权限:1(执行)+ 2(写入)= 3      |  -  wx  |
| **4**  |                  读取权限                   |  r  -   |
| **5**  |   读取和执行权限:4(读取)&plus; 1(执行)= 5   |   rx    |
| **6**  |       读写权限:4(读取)&plus; 2(写)= 6       |  rw  -  |
| **7**  | 所有权限:4(读取)&plus; 2(写)&加; 1(执行)= 7 |   rwx   |

以下是使用testfile的示例.在测试文件上运行 **ls -1** 表明文件的权限如下 :

```
$ls -l testfile-rwxrwxr--  1 amrood   users 1024  Nov 2 00:10  testfile
```



然后每个示例 **chmod** 命令来自在testfile上运行上一个表，然后是 **ls -l** ，这样你就可以看到权限更改 :

```
$ chmod 755 testfile$ls -l testfile-rwxr-xr-x  1 amrood   users 1024  Nov 2 00:10  testfile$chmod 743 testfile$ls -l testfile-rwxr---wx  1 amrood   users 1024  Nov 2 00:10  testfile$chmod 043 testfile$ls -l testfile----r---wx  1 amrood   users 1024  Nov 2 00:10  testfile
```



## 更改所有者和组

在Unix上创建帐户时，它为每个用户分配**所有者ID** 和**组ID** .上述所有权限也是根据所有者和组分配的.

有两个命令可用于更改所有者和文件组 :

- **chown** :  **chown** 命令代表**"更改所有者"**，用于更改文件的所有者.
- **chgrp** :  **chgrp** 命令代表**"更改组"**，用于更改文件组.

## 更改所有权

**chown** 命令可更改文件的所有权.基本语法如下 :

```
$ chown user filelist
```



用户的值可以是系统上的**用户名**，也可以是系统上用户的**用户ID(uid)**.

以下示例将帮助您理解概念 :

```
$ chown amrood testfile $
```



将给定文件的所有者更改为用户 **amrood** .

**注意** : 超级用户root具有不受限制的功能来更改任何文件的所有权，但普通用户只能更改他们拥有的文件的所有权.

## 更改组所有权

**chgrp** 命令可更改文件的组所有权.基本语法如下 :

```
$ chgrp group filelist
```



组的值可以是系统上**组的名称**或**系统上组的组ID(GID)**.

以下示例可帮助您理解概念 :

```
$ chgrp special testfile
```



将给定文件的组更改为**特殊**组.

## SUID和SGID文件权限

通常在执行命令时，必须以特殊权限执行才能完成任务.

例如，当您更改密码时 **passwd** 命令，您的新密码存储在**/etc/shadow** 文件中.

作为普通用户，您不需要出于安全原因，**读取**或**写**访问此文件，但是当您更改密码时，您需要具有写入权限 这个文件.这意味着 **passwd** 程序必须为您提供额外的权限，以便您可以写入文件**/etc/shadow** .

通过称为**设置用户ID(SUID)**和**设置组ID(SGID)**位的机制为程序提供附加权限.

执行启用了SUID位的程序时，将继承该程序所有者的权限.没有设置SUID位的程序使用启动程序的用户的权限运行.

SGID也是这种情况.通常情况下，程序会使用您的组权限执行，但您的组只会针对此程序更改为程序的组所有者.



SUID和SGID位将显示为字母**"s"**如果许可可用. SUID **"s"**位将位于权限位，其中所有者的**执行**权限通常驻留.

例如，命令 :

```
$ ls -l /usr/bin/passwd-r-sr-xr-x  1   root   bin  19031 Feb 7 13:47  /usr/bin/passwd*$
```



显示SUID位已设置且命令归属于根.执行位置中的大写字母 **S** 而不是小写 **s** 表示未设置执行位.

如果粘性在目录上启用了bit，只有当你是以下用户之一时才能删除文件 :

- 粘性的所有者目录
- 要删除的文件的所有者
- 超级用户root

要为任何目录设置SUID和SGID位，请尝试以下命令 :

```
$ chmod ug+s dirname$ ls -ldrwsr-sr-x 2 root root  4096 Jun 19 06:45 dirname$
```
